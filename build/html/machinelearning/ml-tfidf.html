

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>样例-TFIDF &mdash; Data Science 1.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="机器学习评估预测性能" href="evaluationpredictiveperformance.html" />
    <link rel="prev" title="样例-贝叶斯" href="ml-bayesian.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Data Science
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README1.html">Data Science数据科学路线图</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R/index.html">R</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">机器学习</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="machinelearning.html">机器学习概览</a></li>
<li class="toctree-l2"><a class="reference internal" href="ml-lm.html">样例-回归</a></li>
<li class="toctree-l2"><a class="reference internal" href="ml-bayesian.html">样例-贝叶斯</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">样例-TFIDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluationpredictiveperformance.html">机器学习评估预测性能</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracleml4python.html">Oracle机器学习 for Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../businessanalysis/index.html">Business Analysis 业务分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managementmodel/index.html">管理模型</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Data Science</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">机器学习</a> &raquo;</li>
        
      <li>样例-TFIDF</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/machinelearning/ml-tfidf.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tfidf">
<h1>样例-TFIDF<a class="headerlink" href="#tfidf" title="永久链接至标题">¶</a></h1>
<ul>
<li><p>TF-IDF（单文本词频-逆文档频率）</p>
<p>TF-IDF 是对搜索关键词的重要性的度量，具备很强的理论依据，就是不精通搜索的人，直接采用TF-IDF，效果也不会差。</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>TF，term Frequency：用关键词**次数**除以网页总字数，也叫关键字频率：</dt><dd><p>如某网页有1000个字，原子能 的 应用分别出现了2次、35次、5次，那么他们的词频分别是0.002、0.035、0.005 ，这三个数相加，和0.042就是相应的一个网页和查询“原子能的应用”的单文本词频</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IDF，Inverse Document Frequency逆文本频率指数：</dt><dd><p>假定一个关键词w在Dw个网页中出现，那么Dw越大，w的权重越小，反之亦然。
假设中文网页数是十亿，停止词“的”在每个网页中都有，那么Dw=10亿。 他的公式就是log(D/Dw) = log(10亿/10亿）=log(1) = 0；</p>
</dd>
</dl>
</li>
</ol>
<p>如果原子能在200万个网页中出现，那么公式是log(10亿/200万)=log(500)=8.96，那么权重就是8.96。
所以，一段文本的相关性就由如下公式计算：TF1 * IDF1 + TF2 * IDF2 + TF3 * IDF3 … + TFn * IDFn</p>
</li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 利用文本数据集进行TF-IDF计算</span>
<span class="c1">## 从文本2020cio.txt读取文本</span>
<span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">readLines</span><span class="p">((</span><span class="s">&quot;D:\\2020cio.txt&quot;</span><span class="p">))</span>
<span class="o">&gt;</span> <span class="n">corp</span> <span class="o">&lt;-</span> <span class="nf">Corpus</span><span class="p">(</span><span class="nf">VectorSource</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="o">&gt;</span> <span class="nf">head</span><span class="p">(</span><span class="n">corp</span><span class="p">)</span>
<span class="o">&lt;&lt;</span><span class="n">SimpleCorpus</span><span class="o">&gt;&gt;</span>
<span class="n">Metadata</span><span class="o">:</span>  <span class="n">corpus</span> <span class="n">specific</span><span class="o">:</span> <span class="m">1</span><span class="p">,</span> <span class="n">document</span> <span class="nf">level </span><span class="p">(</span><span class="n">indexed</span><span class="p">)</span><span class="o">:</span> <span class="m">0</span>
<span class="n">Content</span><span class="o">:</span>  <span class="n">documents</span><span class="o">:</span> <span class="m">6</span>
<span class="o">&gt;</span> <span class="n">corp</span>
<span class="o">&lt;&lt;</span><span class="n">SimpleCorpus</span><span class="o">&gt;&gt;</span>
<span class="n">Metadata</span><span class="o">:</span>  <span class="n">corpus</span> <span class="n">specific</span><span class="o">:</span> <span class="m">1</span><span class="p">,</span> <span class="n">document</span> <span class="nf">level </span><span class="p">(</span><span class="n">indexed</span><span class="p">)</span><span class="o">:</span> <span class="m">0</span>
<span class="n">Content</span><span class="o">:</span>  <span class="n">documents</span><span class="o">:</span> <span class="m">99</span>
<span class="c1"># 语料库预处理</span>
<span class="c1">## 除去多余空格</span>
<span class="o">&gt;</span> <span class="n">corp</span> <span class="o">&lt;-</span> <span class="nf">tm_map</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span> <span class="n">stripWhitespace</span><span class="p">)</span>
<span class="n">Warning</span> <span class="n">message</span><span class="o">:</span>
<span class="n">In</span> <span class="nf">tm_map.SimpleCorpus</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span> <span class="n">stripWhitespace</span><span class="p">)</span> <span class="o">:</span>
  <span class="n">transformation</span> <span class="n">drops</span> <span class="n">documents</span>
<span class="c1"># 删除标点符号</span>
<span class="o">&gt;</span> <span class="n">corp</span> <span class="o">&lt;-</span> <span class="nf">tm_map</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span> <span class="n">removePunctuation</span><span class="p">)</span>
<span class="n">Warning</span> <span class="n">message</span><span class="o">:</span>
<span class="n">In</span> <span class="nf">tm_map.SimpleCorpus</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span> <span class="n">removePunctuation</span><span class="p">)</span> <span class="o">:</span>
  <span class="n">transformation</span> <span class="n">drops</span> <span class="n">documents</span>
<span class="c1"># 以单词名为行名构建矩阵，注意还有另外一种用法是以文件名为行构建矩阵就要用DocumentTermMatrix()</span>
<span class="o">&gt;</span> <span class="n">tdm</span> <span class="o">&lt;-</span> <span class="nf">TermDocumentMatrix</span><span class="p">(</span><span class="n">corp</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">inspect</span><span class="p">(</span><span class="n">tdm</span><span class="p">)</span>
<span class="o">&lt;&lt;</span><span class="nf">TermDocumentMatrix </span><span class="p">(</span><span class="n">terms</span><span class="o">:</span> <span class="m">790</span><span class="p">,</span> <span class="n">documents</span><span class="o">:</span> <span class="m">99</span><span class="p">)</span><span class="o">&gt;&gt;</span>
<span class="n">Non</span><span class="o">-/</span><span class="n">sparse</span> <span class="n">entries</span><span class="o">:</span> <span class="m">1905</span><span class="o">/</span><span class="m">76305</span>
<span class="n">Sparsity</span>           <span class="o">:</span> <span class="m">98</span><span class="o">%</span>
<span class="o">Maximal term length: 17</span>
<span class="o">Weighting          : term frequency (tf)</span>
<span class="o">Sample             :</span>
<span class="o">       Docs</span>
<span class="o">Terms   1 19 25 3 44 45 53 71 74 89</span>
<span class="o">  2019  1  0  0 2  1  1  1  0  0  0</span>
<span class="o">  2020  0  0  0 1  1  1  1  1  1  1</span>
<span class="o">  and   1  1  1 3  0  2  0  0  0  2</span>
<span class="o">  are   1  0  0 0  0  0  0  0  0  2</span>
<span class="o">  cio   2  1  0 1  1  0  1  1  0  0</span>
<span class="o">  cios  1  0  1 3  0  1  1  0  2  2</span>
<span class="o">  focus 0  0  0 1  0  0  1  0  1  0</span>
<span class="o">  for   0  0  0 0  1  2  0  0  1  0</span>
<span class="o">  the   5  4  5 4  2  2  0  2  1  0</span>
<span class="o">  will  1  0  1 1  0  1  0  0  0  0</span>
<span class="o">&gt; library(SnowballC)</span>
<span class="o"># 消除停用词</span>
<span class="o">&gt; corp &lt;- tm_map(corp, removeWords, stopwords(&quot;english&quot;))</span>
<span class="o">Warning message:</span>
<span class="o">In tm_map.SimpleCorpus(corp, removeWords, stopwords(&quot;english&quot;)) :</span>
<span class="o">  transformation drops documents</span>
<span class="o"># 提取单词词干</span>
<span class="o">&gt; corp &lt;- tm_map(corp, stemDocument)</span>
<span class="o">Warning message:</span>
<span class="o">In tm_map.SimpleCorpus(corp, stemDocument) : transformation drops documents</span>
<span class="o">&gt; tdm &lt;- TermDocumentMatrix(corp)</span>
<span class="o">&gt; inspect(tdm)</span>
<span class="o">&lt;&lt;TermDocumentMatrix (terms: 641, documents: 99)&gt;&gt;</span>
<span class="o">Non-/sparse entries: 1552/61907</span>
<span class="o">Sparsity           : 98%</span>
<span class="n">Maximal</span> <span class="n">term</span> <span class="n">length</span><span class="o">:</span> <span class="m">15</span>
<span class="n">Weighting</span>          <span class="o">:</span> <span class="n">term</span> <span class="nf">frequency </span><span class="p">(</span><span class="n">tf</span><span class="p">)</span>
<span class="n">Sample</span>             <span class="o">:</span>
           <span class="n">Docs</span>
<span class="n">Terms</span>       <span class="m">1</span> <span class="m">15</span> <span class="m">20</span> <span class="m">3</span> <span class="m">44</span> <span class="m">53</span> <span class="m">54</span> <span class="m">71</span> <span class="m">74</span> <span class="m">89</span>
  <span class="m">2019</span>      <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span> <span class="m">2</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>
  <span class="m">2020</span>      <span class="m">0</span>  <span class="m">1</span>  <span class="m">1</span> <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>
  <span class="n">busi</span>      <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span> <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">1</span>
  <span class="n">cio</span>       <span class="m">2</span>  <span class="m">0</span>  <span class="m">1</span> <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>
  <span class="n">cios</span>      <span class="m">1</span>  <span class="m">2</span>  <span class="m">0</span> <span class="m">3</span>  <span class="m">0</span>  <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">2</span>  <span class="m">2</span>
  <span class="n">focus</span>     <span class="m">0</span>  <span class="m">2</span>  <span class="m">1</span> <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span>
  <span class="n">summit</span>    <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span> <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">1</span>
  <span class="n">technolog</span> <span class="m">2</span>  <span class="m">0</span>  <span class="m">0</span> <span class="m">0</span>  <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">1</span>  <span class="m">0</span>
  <span class="n">the</span>       <span class="m">0</span>  <span class="m">0</span>  <span class="m">2</span> <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>
  <span class="n">will</span>      <span class="m">1</span>  <span class="m">1</span>  <span class="m">1</span> <span class="m">1</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">2</span>  <span class="m">0</span>  <span class="m">0</span>  <span class="m">0</span>
<span class="c1"># 计算TD-IDF</span>
<span class="o">&gt;</span> <span class="n">tdidf</span> <span class="o">&lt;-</span> <span class="nf">weightTfIdf</span><span class="p">(</span><span class="n">tdm</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">inspect</span><span class="p">(</span><span class="n">tdidf</span><span class="p">)</span>
<span class="o">&lt;&lt;</span><span class="nf">TermDocumentMatrix </span><span class="p">(</span><span class="n">terms</span><span class="o">:</span> <span class="m">641</span><span class="p">,</span> <span class="n">documents</span><span class="o">:</span> <span class="m">99</span><span class="p">)</span><span class="o">&gt;&gt;</span>
<span class="n">Non</span><span class="o">-/</span><span class="n">sparse</span> <span class="n">entries</span><span class="o">:</span> <span class="m">1552</span><span class="o">/</span><span class="m">61907</span>
<span class="n">Sparsity</span>           <span class="o">:</span> <span class="m">98</span><span class="o">%</span>
<span class="o">Maximal term length: 15</span>
<span class="o">Weighting          : term frequency - inverse document frequency (normalized) (tf-idf)</span>
<span class="o">Sample             :</span>
<span class="o">           Docs</span>
<span class="o">Terms               19         26         29        55         56         77         80        82         97        99</span>
<span class="o">  2019      0.00000000 0.00000000 0.00000000 0.1138751 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.1214668</span>
<span class="o">  2020      0.00000000 0.00000000 0.02941609 0.0000000 0.00000000 0.05883219 0.03125460 0.0000000 0.00000000 0.0000000</span>
<span class="o">  busi      0.00000000 0.00000000 0.00000000 0.1763751 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.0000000</span>
<span class="o">  cio       0.03702098 0.05721424 0.03702098 0.0000000 0.03702098 0.00000000 0.03933479 0.0000000 0.05721424 0.0000000</span>
<span class="o">  cios      0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.0000000</span>
<span class="o">  jan       0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.0000000</span>
<span class="o">  summit    0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000 0.3320002 0.00000000 0.0000000</span>
<span class="o">  technolog 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.0000000</span>
<span class="o">  the       0.00000000 0.00000000 0.10717657 0.0000000 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.0000000</span>
<span class="o">  will      0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.00000000 0.00000000 0.0000000 0.00000000 0.0000000</span>
<span class="o"># 潜在语义分析LSA(latent semantic analysis)</span>
<span class="o">&gt; library(lsa)</span>
<span class="o">&gt; lsa.tfidf &lt;- lsa(tfidf, dim = 20)</span>
<span class="o"># 转换成数据框，方能进行如glm模型预测及模型评估等工作</span>
<span class="o">&gt; words.df &lt;- as.data.frame(as.matrix(lsa.tfidf$dk))</span>


<span class="o">&gt; library(wordcloud)</span>
<span class="o">&gt; wordcloud(corp, colors = &#39;blue&#39;)</span>
<span class="o">&gt; wsf &lt;- TermDocumentMatrix(corp)</span>
<span class="o">&gt; m &lt;- as.matrix(wsf)</span>
<span class="o">&gt; head(m)</span>
<span class="o">        Docs</span>
<span class="o">Terms    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52</span>
<span class="o">  2019   1 1 2 1 1 0 1 0 0  1  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  1  1  0  0  1  0  1  1  0</span>
<span class="o">  can    1 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  1  0  0  0  0  0  1  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0</span>
<span class="o">  chang  1 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0</span>
<span class="o">  cio    2 0 1 0 1 1 1 1 1  1  2  0  1  0  0  1  1  1  1  1  0  2  1  1  0  1  1  2  1  1  1  1  1  1  0  1  1  1  1  1  0  0  0  1  0  0  1  1  1  0  0  1</span>
<span class="o">  cios   1 2 3 0 0 1 1 1 0  0  0  1  0  1  2  1  1  0  0  0  1  0  0  0  1  0  0  1  0  1  0  1  0  0  0  0  0  0  0  0  1  1  1  0  1  1  0  0  0  0  1  0</span>
<span class="o">  consid 1 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0</span>
<span class="o">        Docs</span>
<span class="o">Terms    53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99</span>
<span class="o">  2019    1  0  1  0  0  0  0  0  1  0  0  0  1  0  0  0  0  0  0  0  0  0  1  1  0  1  1  0  0  0  1  0  0  0  0  0  0  0  0  0  0  1  0  1  0  1  1</span>
<span class="o">  can     0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0</span>
<span class="o">  chang   0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  1  0  0  0  0  0  0  0  0  1  0  0</span>
<span class="o">  cio     1  1  0  1  0  1  1  0  0  0  0  0  0  2  1  1  1  1  1  1  0  0  1  0  0  2  2  1  0  0  1  2  1  0  1  1  0  1  1  2  2  1  0  0  1  0  0</span>
<span class="o">  cios    1  0  0  0  1  0  2  1  0  2  1  1  1  0  1  0  0  0  0  1  1  2  0  1  0  0  0  0  1  0  1  0  0  0  0  1  2  1  1  0  1  0  1  0  0  1  0</span>
<span class="o">  consid  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0</span>
<span class="o"># 查看每个单词的出现次数，计算每行词频的和，然后排序</span>
<span class="o">&gt; v &lt;- sort(rowSums(m), decreasing=TRUE)</span>
<span class="o">&gt; d &lt;- data.frame(word = names(v), freq =v)</span>
<span class="o">&gt; head(d)</span>
<span class="o">       word freq</span>
<span class="o">2020   2020   94</span>
<span class="o">cio     cio   74</span>
<span class="o">focus focus   70</span>
<span class="o">cios   cios   52</span>
<span class="o">will   will   32</span>
<span class="o">the     the   32</span>
<span class="o"> tdm &lt;- TermDocumentMatrix(corp)</span>
<span class="o">&gt; tdidf &lt;- weightTfIdf(tdm)</span>
<span class="o">&gt; tdidf</span>
<span class="o">&lt;&lt;TermDocumentMatrix (terms: 641, documents: 99)&gt;&gt;</span>
<span class="o">Non-/sparse entries: 1552/61907</span>
<span class="o">Sparsity           : 98%</span>
<span class="n">Maximal</span> <span class="n">term</span> <span class="n">length</span><span class="o">:</span> <span class="m">15</span>
<span class="n">Weighting</span>          <span class="o">:</span> <span class="n">term</span> <span class="n">frequency</span> <span class="o">-</span> <span class="n">inverse</span> <span class="n">document</span> <span class="nf">frequency </span><span class="p">(</span><span class="n">normalized</span><span class="p">)</span> <span class="p">(</span><span class="n">tf</span><span class="o">-</span><span class="n">idf</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">inspect</span><span class="p">(</span><span class="n">tdidf</span><span class="p">)</span>
<span class="o">&lt;&lt;</span><span class="nf">TermDocumentMatrix </span><span class="p">(</span><span class="n">terms</span><span class="o">:</span> <span class="m">641</span><span class="p">,</span> <span class="n">documents</span><span class="o">:</span> <span class="m">99</span><span class="p">)</span><span class="o">&gt;&gt;</span>
<span class="n">Non</span><span class="o">-/</span><span class="n">sparse</span> <span class="n">entries</span><span class="o">:</span> <span class="m">1552</span><span class="o">/</span><span class="m">61907</span>
<span class="n">Sparsity</span>           <span class="o">:</span> <span class="m">98</span>%
<span class="c1"># 获取给定维数dim=20的潜在语义空间</span>
<span class="c1"># 隐性语义分析引申阅读参考</span>
<span class="o">&gt;</span> <span class="n">lsa.tdidf</span> <span class="o">&lt;-</span> <span class="nf">lsa</span><span class="p">(</span><span class="n">tdidf</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="m">20</span><span class="p">)</span>
<span class="n">Warning</span> <span class="n">message</span><span class="o">:</span>
<span class="n">In</span> <span class="nf">lsa</span><span class="p">(</span><span class="n">tdidf</span><span class="p">,</span> <span class="n">dim</span> <span class="o">=</span> <span class="m">20</span><span class="p">)</span> <span class="o">:</span> <span class="n">[lsa]</span> <span class="o">-</span> <span class="n">there</span> <span class="n">are</span> <span class="n">singular</span> <span class="n">values</span> <span class="n">which</span> <span class="n">are</span> <span class="n">zero.</span>
<span class="c1"># D：文档向量矩阵；T：词向量矩阵；s：对角矩阵 k=dims</span>

<span class="o">&gt;</span> <span class="nf">summary</span><span class="p">(</span><span class="n">lsa.tdidf</span><span class="p">)</span>
  <span class="n">Length</span> <span class="n">Class</span>  <span class="n">Mode</span>
<span class="n">tk</span> <span class="m">12820</span>  <span class="o">-</span><span class="n">none</span><span class="o">-</span> <span class="n">numeric</span>
<span class="n">dk</span>  <span class="m">1980</span>  <span class="o">-</span><span class="n">none</span><span class="o">-</span> <span class="n">numeric</span>
<span class="n">sk</span>    <span class="m">20</span>  <span class="o">-</span><span class="n">none</span><span class="o">-</span> <span class="n">numeric</span>
<span class="o">&gt;</span> <span class="n">words.df</span> <span class="o">&lt;-</span> <span class="nf">as.data.frame</span><span class="p">(</span><span class="nf">as.matrix</span><span class="p">(</span><span class="n">lsa.tdidf</span><span class="o">$</span><span class="n">dk</span><span class="p">))</span>
<span class="o">&gt;</span> <span class="nf">head</span><span class="p">(</span><span class="n">words.df</span><span class="p">)</span>
           <span class="n">V1</span>          <span class="n">V2</span>           <span class="n">V3</span>           <span class="n">V4</span>            <span class="n">V5</span>            <span class="n">V6</span>          <span class="n">V7</span>          <span class="n">V8</span>          <span class="n">V9</span>         <span class="n">V10</span>          <span class="n">V11</span>           <span class="n">V12</span>
<span class="m">1</span> <span class="m">-0.11082959</span>  <span class="m">0.03024325</span> <span class="m">-0.020250478</span>  <span class="m">0.020210038</span> <span class="m">-8.713279e-03</span>  <span class="m">0.0016374672</span> <span class="m">-0.01361382</span> <span class="m">0.031709640</span> <span class="m">-0.02864437</span> <span class="m">0.001580599</span> <span class="m">-0.020215305</span>  <span class="m">0.0596256444</span>
<span class="m">2</span> <span class="m">-0.09911556</span> <span class="m">-0.02035441</span>  <span class="m">0.009085474</span> <span class="m">-0.008437858</span>  <span class="m">2.367281e-02</span>  <span class="m">0.0208146481</span> <span class="m">-0.02424743</span> <span class="m">0.009212675</span> <span class="m">-0.05915897</span> <span class="m">0.059309929</span> <span class="m">-0.038972726</span>  <span class="m">0.0354622876</span>
<span class="m">3</span> <span class="m">-0.10648037</span> <span class="m">-0.02218652</span> <span class="m">-0.035695585</span>  <span class="m">0.027063384</span> <span class="m">-1.428463e-02</span>  <span class="m">0.0010159345</span>  <span class="m">0.03469075</span> <span class="m">0.003209064</span>  <span class="m">0.02116949</span> <span class="m">0.015097879</span>  <span class="m">0.016325384</span>  <span class="m">0.0001395995</span>
<span class="m">4</span> <span class="m">-0.09267651</span> <span class="m">-0.02076691</span>  <span class="m">0.015200384</span>  <span class="m">0.037142322</span> <span class="m">-1.451094e-02</span> <span class="m">-0.0002165991</span> <span class="m">-0.02210088</span> <span class="m">0.041922725</span> <span class="m">-0.08501144</span> <span class="m">0.076511304</span> <span class="m">-0.067379381</span> <span class="m">-0.0308540249</span>

<span class="c1"># 探索性画词云图</span>
<span class="o">&gt;</span> <span class="nf">wordcloud</span><span class="p">(</span><span class="n">d</span><span class="o">$</span><span class="n">word</span><span class="p">,</span> <span class="n">d</span><span class="o">$</span><span class="n">freq</span><span class="p">)</span>
<span class="c1"># 利用RColorBrewer配色方案做词云图</span>
<span class="o">&gt;</span> <span class="nf">if</span><span class="p">(</span><span class="nf">require</span><span class="p">(</span><span class="n">RColorBrewer</span><span class="p">)){</span>
<span class="o">+</span>
<span class="o">+</span>     <span class="n">pal</span> <span class="o">&lt;-</span> <span class="nf">brewer.pal</span><span class="p">(</span><span class="m">9</span><span class="p">,</span><span class="s">&quot;BuGn&quot;</span><span class="p">)</span>
<span class="o">+</span>     <span class="n">pal</span> <span class="o">&lt;-</span> <span class="n">pal[</span><span class="o">-</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">)</span><span class="n">]</span>
<span class="o">+</span>     <span class="nf">wordcloud</span><span class="p">(</span><span class="n">d</span><span class="o">$</span><span class="n">word</span><span class="p">,</span><span class="n">d</span><span class="o">$</span><span class="n">freq</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="m">.3</span><span class="p">),</span><span class="m">2</span><span class="p">,,</span><span class="kc">FALSE</span><span class="p">,,</span><span class="m">.15</span><span class="p">,</span><span class="n">pal</span><span class="p">)</span>
<span class="o">+</span>
<span class="o">+</span>
<span class="o">+</span>     <span class="n">pal</span> <span class="o">&lt;-</span> <span class="nf">brewer.pal</span><span class="p">(</span><span class="m">6</span><span class="p">,</span><span class="s">&quot;Dark2&quot;</span><span class="p">)</span>
<span class="o">+</span>     <span class="n">pal</span> <span class="o">&lt;-</span> <span class="n">pal[</span><span class="o">-</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="n">]</span>
<span class="o">+</span>     <span class="nf">wordcloud</span><span class="p">(</span><span class="n">d</span><span class="o">$</span><span class="n">word</span><span class="p">,</span><span class="n">d</span><span class="o">$</span><span class="n">freq</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="m">.3</span><span class="p">),</span><span class="m">2</span><span class="p">,,</span><span class="kc">TRUE</span><span class="p">,,</span><span class="m">.15</span><span class="p">,</span><span class="n">pal</span><span class="p">)</span>
<span class="o">+</span>
<span class="o">+</span>     <span class="c1">#random colors</span>
<span class="o">+</span>     <span class="nf">wordcloud</span><span class="p">(</span><span class="n">d</span><span class="o">$</span><span class="n">word</span><span class="p">,</span><span class="n">d</span><span class="o">$</span><span class="n">freq</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="m">.3</span><span class="p">),</span><span class="m">2</span><span class="p">,,</span><span class="kc">TRUE</span><span class="p">,</span><span class="kc">TRUE</span><span class="p">,</span><span class="m">.15</span><span class="p">,</span><span class="n">pal</span><span class="p">)</span>
<span class="o">+</span> <span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
<p>生成词云图如下：</p>
<img alt="../_images/2020cio.png" class="align-center" src="../_images/2020cio.png" />
<dl class="simple">
<dt>参考：</dt><dd><ol class="arabic simple">
<li><p>隐性语义分析（LSA）是一种自然语言处理NLP中用到的方法，其通过“矢量语义空间”来提取文档与词中的“概念”，进而分析文档与词之间的关系。LSA的基本假设是，如果两个词多次出现在同一文档中，则这两个词在语义上具有相似性。LSA使用大量的文本上构建一个矩阵，这个矩阵的一行代表一个词，一列代表一个文档，矩阵元素代表该词在该文档中出现的次数，然后在此矩阵上使用奇异值分解（SVD）来保留列信息的情况下减少矩阵行数，之后每两个词语的相似性则可以通过其行向量的cos值（或者归一化之后使用向量点乘）来进行标示，此值越接近于1则说明两个词语越相似，越接近于0则说明越不相似。</p></li>
<li><p>新闻归类、主题归类：余弦定理（准确性高，大数据量慢）</p></li>
<li><p>超大规模文本粗分类：奇异值分解得到粗分类结果，再利用个计算向量余弦的方法得到比较精确的结果</p></li>
</ol>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="evaluationpredictiveperformance.html" class="btn btn-neutral float-right" title="机器学习评估预测性能" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ml-bayesian.html" class="btn btn-neutral float-left" title="样例-贝叶斯" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Shaofei Wang

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>